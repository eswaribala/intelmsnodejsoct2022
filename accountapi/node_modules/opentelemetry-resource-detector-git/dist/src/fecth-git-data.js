"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.readFileFromGitDir = exports.executeGitCommand = void 0;
const child_process_1 = __importDefault(require("child_process"));
const path_1 = __importDefault(require("path"));
const fs_1 = __importDefault(require("fs"));
const executeGitCommand = (gitCommand) => {
    try {
        return child_process_1.default
            .execSync(gitCommand, { stdio: ['ignore', 'pipe', 'pipe'], timeout: 250 })
            .toString()
            .trim();
    }
    catch (_a) { }
};
exports.executeGitCommand = executeGitCommand;
const readFileFromGitDir = (pathInGit) => {
    // git always use refs with '/', but on windows, when accessing the fs,
    // we should replace it to '\'
    const pathInGitOsSpecific = pathInGit.replace('/', path_1.default.sep);
    const headFilePath = path_1.default.join(process.cwd(), '.git', pathInGitOsSpecific);
    return fs_1.default.readFileSync(headFilePath).toString().trim();
};
exports.readFileFromGitDir = readFileFromGitDir;
//# sourceMappingURL=fecth-git-data.js.map