"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.httpHeadersToSpanAttributes = exports.normalizedHeaderToAttribute = exports.normalizeHeader = void 0;
exports.normalizeHeader = (headerName) => {
    return headerName.toLowerCase().replace(/-/g, '_');
};
exports.normalizedHeaderToAttribute = (type, normalizedHeader) => {
    return `http.${type}.header.${normalizedHeader}`;
};
exports.httpHeadersToSpanAttributes = (type, headers) => {
    if (!headers) {
        return {};
    }
    return Object.keys(headers).reduce((attrs, headerName) => {
        const attributeName = exports.normalizedHeaderToAttribute(type, exports.normalizeHeader(headerName));
        const headerValue = headers[headerName];
        const normalizedHeaderValue = Array.isArray(headerValue) ? headerValue : [headerValue.toString()];
        if (attributeName in attrs) {
            attrs[attributeName].push(...normalizedHeaderValue);
        }
        else {
            attrs[attributeName] = normalizedHeaderValue;
        }
        return attrs;
    }, {});
};
//# sourceMappingURL=http-headers.js.map