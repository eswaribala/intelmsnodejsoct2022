{"version":3,"file":"http-headers.js","sourceRoot":"","sources":["../../../src/plugins-customizations/http-headers.ts"],"names":[],"mappings":";;;AAAa,QAAA,eAAe,GAAG,CAAC,UAAkB,EAAE,EAAE;IAClD,OAAO,UAAU,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;AACvD,CAAC,CAAC;AAEW,QAAA,2BAA2B,GAAG,CAAC,IAA4B,EAAE,gBAAwB,EAAE,EAAE;IAClG,OAAO,QAAQ,IAAI,WAAW,gBAAgB,EAAE,CAAC;AACrD,CAAC,CAAC;AAEW,QAAA,2BAA2B,GAAG,CACvC,IAA4B,EAC5B,OAAmD,EAC3B,EAAE;IAC1B,IAAI,CAAC,OAAO,EAAE;QACV,OAAO,EAAE,CAAC;KACb;IAED,OAAO,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,UAAU,EAAE,EAAE;QACrD,MAAM,aAAa,GAAG,mCAA2B,CAAC,IAAI,EAAE,uBAAe,CAAC,UAAU,CAAC,CAAC,CAAC;QAErF,MAAM,WAAW,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;QACxC,MAAM,qBAAqB,GAAG,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC;QAClG,IAAI,aAAa,IAAI,KAAK,EAAE;YACxB,KAAK,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,GAAG,qBAAqB,CAAC,CAAC;SACvD;aAAM;YACH,KAAK,CAAC,aAAa,CAAC,GAAG,qBAAqB,CAAC;SAChD;QACD,OAAO,KAAK,CAAC;IACjB,CAAC,EAAE,EAAE,CAAC,CAAC;AACX,CAAC,CAAC","sourcesContent":["export const normalizeHeader = (headerName: string) => {\n    return headerName.toLowerCase().replace(/-/g, '_');\n};\n\nexport const normalizedHeaderToAttribute = (type: 'request' | 'response', normalizedHeader: string) => {\n    return `http.${type}.header.${normalizedHeader}`;\n};\n\nexport const httpHeadersToSpanAttributes = (\n    type: 'request' | 'response',\n    headers: Record<string, number | string | string[]>\n): Record<string, string[]> => {\n    if (!headers) {\n        return {};\n    }\n\n    return Object.keys(headers).reduce((attrs, headerName) => {\n        const attributeName = normalizedHeaderToAttribute(type, normalizeHeader(headerName));\n\n        const headerValue = headers[headerName];\n        const normalizedHeaderValue = Array.isArray(headerValue) ? headerValue : [headerValue.toString()];\n        if (attributeName in attrs) {\n            attrs[attributeName].push(...normalizedHeaderValue);\n        } else {\n            attrs[attributeName] = normalizedHeaderValue;\n        }\n        return attrs;\n    }, {});\n};\n"]}