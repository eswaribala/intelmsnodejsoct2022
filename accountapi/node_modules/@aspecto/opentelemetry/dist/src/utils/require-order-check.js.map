{"version":3,"file":"require-order-check.js","sourceRoot":"","sources":["../../../src/utils/require-order-check.ts"],"names":[],"mappings":";;;AAAA,MAAM,aAAa,GAAG;IAClB,SAAS;IACT,MAAM;IACN,OAAO;IACP,SAAS;IACT,UAAU;IACV,WAAW;IACX,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,cAAc;IACd,wBAAwB;IACxB,SAAS;CACZ,CAAC;AAEW,QAAA,oBAAoB,GAAG,GAAG,EAAE;IACrC,MAAM,qBAAqB,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,IAAY,EAAE,EAAE;QAChE,IAAI;YACA,MAAM,sBAAsB,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrD,OAAO,sBAAsB,IAAI,OAAO,CAAC,KAAK,CAAC;SAClD;QAAC,WAAM;YACJ,OAAO,KAAK,CAAC;SAChB;IACL,CAAC,CAAC,CAAC;IACH,IAAI,qBAAqB,CAAC,MAAM,GAAG,CAAC,EAAE;QAClC,MAAM,KAAK,GAAG;YACV,8BAA8B,qBAAqB,CAAC,IAAI,CACpD,IAAI,CACP,0DAA0D;YAC3D,yEAAyE;SAC5E,CAAC;QACF,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC;QAC/D,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;QACzC,OAAO,CAAC,IAAI,CAAC,KAAK,MAAM,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,MAAM,IAAI,CAAC,CAAC;QACrE,OAAO;YACH,KAAK,EAAE,IAAI;YACX,cAAc,EAAE,qBAAqB;SACxC,CAAC;KACL;IACD,OAAO;QACH,KAAK,EAAE,KAAK;QACZ,cAAc,EAAE,EAAE;KACrB,CAAC;AACN,CAAC,CAAC","sourcesContent":["const modulesToHook = [\n    'express',\n    'http',\n    'https',\n    'mongodb',\n    'mongoose',\n    'sequelize',\n    'typeorm',\n    'ioredis',\n    'aws-sdk',\n    'kafkajs',\n    'neo4j-driver',\n    '@elastic/elasticsearch',\n    'amqplib',\n];\n\nexport const checkForRequireOrder = () => {\n    const requiredModulesToHook = modulesToHook.filter((name: string) => {\n        try {\n            const moduleResolvedFilename = require.resolve(name);\n            return moduleResolvedFilename in require.cache;\n        } catch {\n            return false;\n        }\n    });\n    if (requiredModulesToHook.length > 0) {\n        const lines = [\n            `\\u001b[31mðŸ™Œ Some modules (${requiredModulesToHook.join(\n                ', '\n            )}) were required before Aspecto was initialized.\\u001b[0m`,\n            '@aspecto/opentelemetry should be initialized in the first line of code.',\n        ];\n        const maxLength = Math.max(...lines.map((l) => l.length)) - 10;\n        const border = '='.repeat(maxLength + 2);\n        console.warn(`\\n${border}\\n\\n ${lines.join('\\n ')} \\n\\n${border}\\n`);\n        return {\n            error: true,\n            missingModules: requiredModulesToHook,\n        };\n    }\n    return {\n        error: false,\n        missingModules: [],\n    };\n};\n"]}